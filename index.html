<html>
<head>
  <meta charset="UTF-8">
  <script src="js/p5.min.js"></script>
  <script>
    var x = 0, y = 0, estado, passos = 3;
    var posicao = 0, cont = 0, delay = 5;
    //var x2 = 0, y2 = 0, posicao2 = 0, cont2 = 0;
    
    var x2 = 500, y2 = 500; //Coordenadas do Indio
    var aux;
    
    var Jog_Frente = [];
    var Jog_Direita = [];
    var Jog_Esquerda = [];
    var Jog_Tras = [];
    
    var Ind_Frente = [];
    var Ind_Direita = [];
    var Ind_Esquerda = [];
    var Ind_Tras = [];

    
function preload(){
  //Salva as img de movimentação dos persongagens
  
  //JOGADOR
  Jog_Frente[0] = loadImage("Imagens/Jogador - Frente0.png");
  Jog_Frente[1] = loadImage("Imagens/Jogador - Frente1.png");
  Jog_Frente[2] = loadImage("Imagens/Jogador - Frente2.png");
  Jog_Frente[3] = loadImage("Imagens/Jogador - Frente3.png");
  
  Jog_Direita[0] = loadImage("Imagens/Jogador - Direita0.png");
  Jog_Direita[1] = loadImage("Imagens/Jogador - Direita1.png");
  Jog_Direita[2] = loadImage("Imagens/Jogador - Direita2.png");
  Jog_Direita[3] = loadImage("Imagens/Jogador - Direita3.png");
  
  Jog_Esquerda[0] = loadImage("Imagens/Jogador - Esquerda0.png");
  Jog_Esquerda[1] = loadImage("Imagens/Jogador - Esquerda1.png");
  Jog_Esquerda[2] = loadImage("Imagens/Jogador - Esquerda2.png");
  Jog_Esquerda[3] = loadImage("Imagens/Jogador - Esquerda3.png");
  
  Jog_Tras[0] = loadImage("Imagens/Jogador - Trás0.png");
  Jog_Tras[1] = loadImage("Imagens/Jogador - Trás1.png");
  Jog_Tras[2] = loadImage("Imagens/Jogador - Trás2.png");
  Jog_Tras[3] = loadImage("Imagens/Jogador - Trás3.png");
  
  
  
  //ÍNDIO
  Ind_Frente[0] = loadImage("Imagens/Índio - Frente0.png");
  Ind_Frente[1] = loadImage("Imagens/Índio - Frente1.png");
  Ind_Frente[2] = loadImage("Imagens/Índio - Frente2.png");
  Ind_Frente[3] = loadImage("Imagens/Índio - Frente3.png");
    
  Ind_Direita[0] = loadImage("Imagens/Índio - Direita0.png");
  Ind_Direita[1] = loadImage("Imagens/Índio - Direita1.png");
  Ind_Direita[2] = loadImage("Imagens/Índio - Direita2.png");
  Ind_Direita[3] = loadImage("Imagens/Índio - Direita3.png");
  
  Ind_Esquerda[0] = loadImage("Imagens/Índio - Esquerda0.png");
  Ind_Esquerda[1] = loadImage("Imagens/Índio - Esquerda1.png");
  Ind_Esquerda[2] = loadImage("Imagens/Índio - Esquerda2.png");
  Ind_Esquerda[3] = loadImage("Imagens/Índio - Esquerda3.png");
  
  Ind_Tras[0] = loadImage("Imagens/Índio - Trás0.png");
  Ind_Tras[1] = loadImage("Imagens/Índio - Trás1.png");
  Ind_Tras[2] = loadImage("Imagens/Índio - Trás2.png");
  Ind_Tras[3] = loadImage("Imagens/Índio - Trás3.png");
  
}
    
function setup() {
  createCanvas(windowWidth, windowHeight);
//  image (Jog_Frente[0], 0, 0);
}

function draw() {
    background ("black");

    if(keyIsPressed == true)
      estado = key;
    else
      estado = 0;
  
      
    switch (estado){ //MOVIMENTO DO JOGADOR
      case 'ArrowUp':
        if (colisao(x, y - passos, 32, 77, x2, y2, 32, 77) == false){
          y -= passos;
          aux = Jog_Tras[posicao];
        }
        break;
      
      case 'ArrowDown':
        if (colisao(x, y + passos, 32, 77, x2, y2, 32, 77) == false){
          y += passos;
          aux = Jog_Frente[posicao];
        }
        break;
    
      case 'ArrowRight':
        if (colisao(x + passos, y, 32, 77, x2, y2, 32, 77) == false){
          x += passos;
          aux = Jog_Direita[posicao];
        }  
        break;
      
      case 'ArrowLeft':
        if (colisao(x - passos, y, 32, 77, x2, y2, 32, 77) == false){
          x -= passos;
          aux = Jog_Esquerda[posicao];
        }
        break;
    }
   
    image (aux, x, y); //Exibe o jogador com a imagem atualizada nos x e y já modificados
  
    if (keyIsPressed == true){ //Efeito de Delay na animação da sprite
      if (cont == delay){ // JOGADOR
        posicao++;
        cont = 0;
      }
      else
        cont++;
    }
    if (posicao > 3)
      posicao = 0;
      
  
    if (x2 > x) //MOVIMENTAÇÃO DO INDIO
      x2--;
    else
      x2++;
  
    if (y2 > y)
      y2--;
    else
      y2++;
  
    image (Ind_Frente[0], x2, y2); //Exibe o Indio

}
    
function colisao(xA, yA, compA, altA, xB, yB, compB, altB){
  //Colisão entre dois objetos A e B.
  //Entrar com as coordenadas (x e y) bem como o comprimento e altura de ambos.
  
  if (xA + compA < xB) //A está a esquerda de B
    return false;
  if (xB < xA - compB) //A está a direita de B
    return false;
  if (yA - altB > yB) //A está embaixo de B
    return false;
  if (yA + altA < yB) //A está acima de B
    return false;
  
  return true; //Se ele não entrar em nenhuma dessas 4 situações,
               //então ele está colidindo
}
    
  
  </script>

  <style> body {padding: 0; margin: 0;} </style>
</head>

<body>
</body>
</html>
